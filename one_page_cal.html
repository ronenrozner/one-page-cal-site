<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One-Page Calendar</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .year-selector {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .year-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .year-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .year-display {
            font-size: 2em;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        
        .calendar-wrapper {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            font-family: Arial, sans-serif;
        }
        
        .calendar-table {
            border: 2px solid #000;
            border-collapse: separate;
            background: white;
        }
        
        .months-row {
            height: 35px;
        }
        
        .months-row td {
            border: 1px solid #000;
            text-align: center;
            vertical-align: middle;
            font-weight: bold;
            font-size: 12px;
            padding: 2px;
            cursor: pointer;
            width: 60px;
        }
        
        .months-row td:hover {
            background: #f0f0f0;
        }
        
        .months-row td.highlighted {
            background: #e6f3ff;
        }
        
        .dates-cell {
            border: 1px solid #000;
            padding: 0;
            vertical-align: top;
        }
        
        .dates-grid {
            display: grid;
            grid-template-columns: repeat(5, 35px);
            grid-template-rows: repeat(7, 30px);
        }
        
        .date-item {
            border: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }
        
        .days-cell {
            border: 1px solid #000;
            padding: 0;
            vertical-align: top;
        }
        
        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 45px);
            grid-template-rows: repeat(7, 30px);
        }
        
        .day-item {
            border: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            padding: 2px;
            text-align: center;
        }
        
        .day-item.header {
            font-weight: bold;
            background: #f5f5f5;
        }
        
        .day-item.weekend-header {
            color: #dc2626;
        }
        
        .day-item.highlighted {
            background: #fff2cc;
            font-weight: bold;
        }
        
        .year-label {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .date-highlight {
            background: #fef3c7 !important;
            color: #d97706;
            font-weight: bold;
            border: 2px solid #f59e0b;
        }
        
        .info-panel {
            background: #f8fafc;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border-left: 5px solid #667eea;
        }
        
        .usage-guide {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .guide-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .guide-item h3 {
            margin: 0 0 10px 0;
            color: #667eea;
        }
        
        .leap-year-indicator {
            background: #dcfce7;
            color: #166534;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>One-Page Calendar</h1>
            <div class="year-selector">
                <button class="year-btn" onclick="changeYear(-1)">← Previous</button>
                <div class="year-display" id="yearDisplay">2025</div>
                <button class="year-btn" onclick="changeYear(1)">Next →</button>
                <span id="leapIndicator"></span>
            </div>
        </div>
        
        <div class="calendar-wrapper">
            <div style="position: relative;">
                <table class="calendar-table" cellspacing="0">
                    <!-- Months header rows -->
                    <tr class="months-row" id="monthsRow1">
                        <td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                    </tr>
                    <tr class="months-row" id="monthsRow2"> 
                        <td></td><td></td><td></td><td></td>
                        <td colspan="3" style="text-align: right; padding-right: 10px; font-size: 14px; font-weight: bold;"></td>
                    </tr>
                    
                    <!-- Main calendar body -->
                    <tr>
                        <!-- Dates column -->
                        <td class="dates-cell">
                            <div class="dates-grid" id="datesGrid">
                                <!-- Will be generated -->
                            </div>
                        </td>
                        
                        <!-- Days columns -->
                        <td class="days-cell" colspan="6">
                            <div class="days-grid" id="daysGrid">
                                <!-- Will be generated -->
                            </div>
                        </td>
                    </tr>
                </table>
                <div class="year-label" id="yearLabel"></div>
            </div>
        </div>
        
        <div class="info-panel">
            <h2>How to Use This Calendar</h2>
            <div class="usage-guide">
                <div class="guide-item">
                    <h3>Find Day of Week for a Date</h3>
                    <p>Find your month in the top row, then follow down to intersect with your date on the left. The column header shows the day of the week.</p>
                </div>
                <div class="guide-item">
                    <h3>Find Dates for a Day</h3>
                    <p>Start with a day of the week column, then look down to see which dates fall on that day for each month.</p>
                </div>
                <div class="guide-item">
                    <h3>Special Dates</h3>
                    <p>Click on any month to highlight it. Perfect for finding holidays, birthdays, or planning events!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentYear = new Date().getFullYear();
        let highlightedMonth = null;
        
        const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 
                            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        
        function isLeapYear(year) {
            return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
        }
        
        function getJanuary1DayOfWeek(year) {
            // Calculate day of week for January 1st using Zeller's congruence
            const q = 1; // day of month
            let m = 13; // January treated as month 13 of previous year
            let k = (year - 1) % 100; // year of century
            let j = Math.floor((year - 1) / 100); // century
            
            const h = (q + Math.floor((13 * (m + 1)) / 5) + k + Math.floor(k / 4) + Math.floor(j / 4) - 2 * j) % 7;
            return (h + 5) % 7; // Convert to 0=Sunday format
        }
        
        function getMonthStartDay(year, month) {
            // Calculate which day of week each month starts on
            const jan1 = getJanuary1DayOfWeek(year);
            const daysSinceJan1 = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
            
            let days = daysSinceJan1[month];
            if (isLeapYear(year) && month > 1) {
                days += 1; // Add leap day for March onwards
            }
            
            return (jan1 + days) % 7;
        }
        
        function generateCalendar() {
            const monthsRow1 = document.getElementById('monthsRow1');
            const monthsRow2 = document.getElementById('monthsRow2');
            const datesGrid = document.getElementById('datesGrid');
            const daysGrid = document.getElementById('daysGrid');
            const yearDisplay = document.getElementById('yearDisplay');
            const yearLabel = document.getElementById('yearLabel');
            const leapIndicator = document.getElementById('leapIndicator');
            
            yearDisplay.textContent = currentYear;
            yearLabel.textContent = currentYear;
            
            if (isLeapYear(currentYear)) {
                leapIndicator.innerHTML = '<span class="leap-year-indicator">LEAP YEAR</span>';
                daysInMonth[1] = 29;
            } else {
                leapIndicator.innerHTML = '';
                daysInMonth[1] = 28;
            }
            
            // Clear existing content
            monthsRow1.innerHTML = '';
            monthsRow2.innerHTML = '';
            datesGrid.innerHTML = '';
            daysGrid.innerHTML = '';
            
            // Generate months positioning
            const monthPositions = getMonthPositions(currentYear);
            
            // Create month cells for both rows (7 columns each)
            for (let col = 0; col < 7; col++) {
                // Row 1
                const cell1 = document.createElement('td');
                const monthInRow1 = monthPositions.find(m => m.dayOfWeek === col && m.row === 0);
                if (monthInRow1) {
                    cell1.textContent = monthNames[monthInRow1.month];
                    cell1.onclick = () => toggleMonthHighlight(monthInRow1.month);
                    if (highlightedMonth === monthInRow1.month) {
                        cell1.classList.add('highlighted');
                    }
                }
                monthsRow1.appendChild(cell1);
                
                // Row 2 (only first 4 columns, last 3 are merged for year)
                if (col < 4) {
                    const cell2 = document.createElement('td');
                    const monthInRow2 = monthPositions.find(m => m.dayOfWeek === col && m.row === 1);
                    if (monthInRow2) {
                        cell2.textContent = monthNames[monthInRow2.month];
                        cell2.onclick = () => toggleMonthHighlight(monthInRow2.month);
                        if (highlightedMonth === monthInRow2.month) {
                            cell2.classList.add('highlighted');
                        }
                    }
                    monthsRow2.appendChild(cell2);
                } else if (col === 4) {
                    // Add the merged cell for remaining months and year space
                    const mergedCell = document.createElement('td');
                    mergedCell.colSpan = 3;
                    mergedCell.style.textAlign = 'left';
                    mergedCell.style.paddingLeft = '5px';
                    
                    // Add remaining months from row 2
                    const remainingMonths = monthPositions.filter(m => m.dayOfWeek >= 4 && m.row === 1);
                    const monthTexts = remainingMonths.map(m => {
                        const span = document.createElement('span');
                        span.textContent = monthNames[m.month];
                        span.style.cursor = 'pointer';
                        span.style.marginRight = '8px';
                        span.onclick = () => toggleMonthHighlight(m.month);
                        if (highlightedMonth === m.month) {
                            span.style.backgroundColor = '#e6f3ff';
                        }
                        return span;
                    });
                    
                    monthTexts.forEach(span => mergedCell.appendChild(span));
                    monthsRow2.appendChild(mergedCell);
                }
            }
            
            // Generate dates grid (5 columns x 7 rows)
            const dateNumbers = [
                [1, 8, 15, 22, 29],
                [2, 9, 16, 23, 30],
                [3, 10, 17, 24, 31],
                [4, 11, 18, 25, ''],
                [5, 12, 19, 26, ''],
                [6, 13, 20, 27, ''],
                [7, 14, 21, 28, '']
            ];
            
            for (let row = 0; row < 7; row++) {
                for (let col = 0; col < 5; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'date-item';
                    cell.textContent = dateNumbers[row][col];
                    datesGrid.appendChild(cell);
                }
            }
            
            // Generate days grid - header row first
            const dayHeaders = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            dayHeaders.forEach((day, index) => {
                const cell = document.createElement('div');
                cell.className = 'day-item header';
                if (day === 'Sat' || day === 'Sun') {
                    cell.classList.add('weekend-header');
                }
                cell.textContent = day;
                daysGrid.appendChild(cell);
            });
            
            // Generate days grid content (6 more rows for all months)
            for (let row = 0; row < 6; row++) {
                for (let dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++) {
                    const cell = document.createElement('div');
                    cell.className = 'day-item';
                    
                    // Calculate dates for each month that fall on this day
                    let content = '';
                    for (let month = 0; month < 12; month++) {
                        const startDay = getMonthStartDay(currentYear, month);
                        const adjustedDayOfWeek = (dayOfWeek + 1) % 7; // Convert Mon=0 to Sun=0 format
                        
                        const dates = [];
                        for (let date = 1; date <= daysInMonth[month]; date++) {
                            if ((startDay + date - 1) % 7 === adjustedDayOfWeek) {
                                dates.push(date);
                            }
                        }
                        
                        if (dates.length > row && dates[row]) {
                            if (content) content += ' ';
                            content += dates[row];
                            
                            if (highlightedMonth === month) {
                                cell.classList.add('highlighted');
                            }
                        }
                    }
                    
                    cell.textContent = content;
                    daysGrid.appendChild(cell);
                }
            }
        }
        
        function getMonthPositions(year) {
            const positions = [];
            
            for (let month = 0; month < 12; month++) {
                const startDay = getMonthStartDay(year, month);
                
                // Determine row and position based on the specific pattern
                let row = 0;
                
                // This follows the exact pattern from the document
                // The positioning is based on when each month starts and the calendar math
                if (isLeapYear(year)) {
                    // Leap year positioning (like 2024)
                    if ([0, 3, 6].includes(month)) { // Jan, Apr, Jul
                        row = Math.floor(positions.filter(p => p.dayOfWeek === startDay).length / 1);
                    } else {
                        row = positions.filter(p => p.dayOfWeek === startDay && p.row === 0).length > 0 ? 1 : 0;
                    }
                } else {
                    // Non-leap year positioning
                    row = positions.filter(p => p.dayOfWeek === startDay && p.row === 0).length > 0 ? 1 : 0;
                }
                
                // Ensure we don't exceed 2 rows
                if (row > 1) row = 1;
                
                positions.push({
                    month: month,
                    dayOfWeek: startDay,
                    row: row
                });
            }
            
            return positions;
        }
        
        function toggleMonthHighlight(month) {
            if (highlightedMonth === month) {
                highlightedMonth = null;
            } else {
                highlightedMonth = month;
            }
            generateCalendar();
        }
        
        function changeYear(delta) {
            currentYear += delta;
            highlightedMonth = null;
            generateCalendar();
        }
        
        // Initialize calendar
        generateCalendar();
    </script>
</body>
</html>